<!-- src/Web/PatientRecovery.Web/index.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Recovery System</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Add this to your HTML head -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Add this to your HTML -->
</head>

<body onload="initializePage()">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-heartbeat me-2"></i>
                Patient Recovery System
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" onclick="showSection('dashboard')">
                            <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('patients')">
                            <i class="fas fa-users me-1"></i>Patients
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('monitoring')">
                            <i class="fas fa-chart-line me-1"></i>Monitoring
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('diagnosis')">
                            <i class="fas fa-stethoscope me-1"></i>Diagnosis
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('rehabilitation')">
                            <i class="fas fa-dumbbell me-1"></i>Rehabilitation
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid mt-4">
        <!-- Dashboard Section -->
        <div id="dashboard-section" class="content-section">
            <div class="row">
                <div class="col-12">
                    <h2 class="mb-4">
                        <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                    </h2>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="row mb-4">
                <div class="col-xl-3 col-md-6">
                    <div class="card bg-primary text-white">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4 id="total-patients">0</h4>
                                    <p class="mb-0">Total Patients</p>
                                </div>
                                <div class="align-self-center">
                                    <i class="fas fa-users fa-2x"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6">
                    <div class="card bg-success text-white">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4 id="active-monitoring">0</h4>
                                    <p class="mb-0">Active Monitoring</p>
                                </div>
                                <div class="align-self-center">
                                    <i class="fas fa-heartbeat fa-2x"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6">
                    <div class="card bg-warning text-white">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4 id="pending-diagnosis">0</h4>
                                    <p class="mb-0">Pending Diagnosis</p>
                                </div>
                                <div class="align-self-center">
                                    <i class="fas fa-stethoscope fa-2x"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6">
                    <div class="card bg-info text-white">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h4 id="rehabilitation-plans">0</h4>
                                    <p class="mb-0">Rehabilitation Plans</p>
                                </div>
                                <div class="align-self-center">
                                    <i class="fas fa-dumbbell fa-2x"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activities -->
            <div class="row">
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Recent Monitoring Records</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped" id="recent-monitoring-table">
                                    <thead>
                                        <tr>
                                            <th>Patient</th>
                                            <th>Temperature</th>
                                            <th>Blood Pressure</th>
                                            <th>Heart Rate</th>
                                            <th>Recorded At</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">System Alerts</h5>
                        </div>
                        <div class="card-body">
                            <div id="alerts-container">
                                <!-- Alerts will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Patients Section -->
        <div id="patients-section" class="content-section" style="display: none;">
            <div class="row">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2><i class="fas fa-users me-2"></i>Patients</h2>
                        <button class="btn btn-primary" onclick="showAddPatientModal()">
                            <i class="fas fa-plus me-1"></i>Add Patient
                        </button>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped" id="patients-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Date of Birth</th>
                                    <th>Gender</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Location</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Monitoring Section -->
        <div id="monitoring-section" class="content-section" style="display: none;">
            <div class="row">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2><i class="fas fa-chart-line me-2"></i>Patient Monitoring</h2>
                        <button class="btn btn-primary" onclick="showAddMonitoringModal()">
                            <i class="fas fa-plus me-1"></i>Add Record
                        </button>
                    </div>
                </div>
            </div>

            <!-- Patient Selection -->
            <div class="row mb-4">
                <div class="col-md-4">
                    <label for="monitoring-patient-select" class="form-label">Select Patient:</label>
                    <select class="form-select" id="monitoring-patient-select" onchange="loadPatientMonitoring()">
                        <option value="">Choose a patient...</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="monitoring-timeframe" class="form-label">Timeframe:</label>
                    <select class="form-select" id="monitoring-timeframe" onchange="loadPatientMonitoring()">
                        <option value="24">Last 24 hours</option>
                        <option value="72">Last 3 days</option>
                        <option value="168">Last week</option>
                    </select>
                </div>
            </div>

            <!-- Monitoring Chart -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Vital Signs Chart</h5>
                        </div>
                        <div class="card-body">
                            <canvas id="vitals-chart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Monitoring Records Table -->
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Monitoring Records</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped" id="monitoring-table">
                            <thead>
                                <tr>
                                    <th>Date/Time</th>
                                    <th>Temperature (°C)</th>
                                    <th>Blood Pressure</th>
                                    <th>Heart Rate (bpm)</th>
                                    <th>Weight (kg)</th>
                                    <th>Location</th>
                                    <th>Recorded By</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="monitoringModal" tabindex="-1">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Monitoring Details</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body" id="monitoringDetailsContainer">
                        <!-- Fetched monitoring data will be shown here -->
                    </div>
                </div>
            </div>
        </div>


        <!-- Diagnosis Section -->
        <div id="diagnosis-section" class="content-section" style="display: none;">
            <div class="row">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2><i class="fas fa-stethoscope me-2"></i>Diagnosis</h2>
                        <button class="btn btn-primary" onclick="showAddDiagnosisModal()">
                            <i class="fas fa-plus me-1"></i>Add Diagnosis
                        </button>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped" id="diagnosis-table">
                            <thead>
                                <tr>
                                    <th>Patient ID</th>
                                    <th>Symptoms</th>
                                    <th>Diagnosis</th>
                                    <th>Treatment</th>
                                    <th>Status</th>
                                    <th>Severity</th>
                                    <th>Note</th>
                                    <th>Date</th>
                                    <th>Docktor</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Diagnosis Modal -->
        <div class="modal fade" id="addDiagnosisModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Add Diagnosis</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <form id="addDiagnosisForm">
                            <div class="mb-3">
                                <label for="patientId" class="form-label">Patient ID *</label>
                                <input type="number" class="form-control" id="patientId" required>
                                <div id="patientInfo" class="form-text text-muted"></div>
                            </div>

                            <div class="mb-3">
                                <label for="symptoms" class="form-label">Symptoms *</label>
                                <input type="text" class="form-control" id="symptoms" required>
                            </div>

                            <div class="mb-3">
                                <label for="diagnosisName" class="form-label">Diagnosis Name *</label>
                                <input type="text" class="form-control" id="diagnosisName" required>
                            </div>

                            <div class="mb-3">
                                <label for="treatment" class="form-label">Treatment *</label>
                                <input type="text" class="form-control" id="treatment" required>
                            </div>

                            <div class="mb-3">
                                <label for="status" class="form-label">Status *</label>
                                <select class="form-select" id="status" required>
                                    <option value="">Select status</option>
                                    <option value="NotStarted">Not Started</option>
                                    <option value="InProgress">In Progress</option>
                                    <option value="Completed">Completed</option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label for="severity" class="form-label">Severity (1-5) *</label>
                                <input type="number" class="form-control" id="severity" min="1" max="5" required>
                            </div>

                            <div class="mb-3">
                                <label for="notes" class="form-label">Notes *</label>
                                <textarea class="form-control" id="notes" rows="3"></textarea>
                            </div>

                            <div class="mb-3">
                                <label for="doctorName" class="form-label">Doctor Name *</label>
                                <input type="text" class="form-control" id="doctorName" required>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" onclick="addDiagnosis()">Add Diagnosis</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Rehabilitation Section -->
        <div id="rehabilitation-section" class="content-section" style="display: none;">
            <div class="row">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2><i class="fas fa-dumbbell me-2"></i>Rehabilitation</h2>
                        <button class="btn btn-primary" onclick="showAddRehabilitationModal()">
                            <i class="fas fa-plus me-1"></i>Add Plan
                        </button>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped" id="rehabilitation-table">
                            <thead>
                                <tr>
                                    <th>Patient ID</th>
                                    <th>Plan Name</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th>Progress</th>
                                    <th>Status</th>
                                    <th>Therapis Name</th>
                                    <th>Created Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Patient Modal -->
    <div class="modal fade" id="addPatientModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Patient</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addPatientForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="firstName" class="form-label">First Name *</label>
                                    <input type="text" class="form-control" id="firstName" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="lastName" class="form-label">Last Name *</label>
                                    <input type="text" class="form-control" id="lastName" required>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="dateOfBirth" class="form-label">Date of Birth *</label>
                                    <input type="date" class="form-control" id="dateOfBirth" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="gender" class="form-label">Gender *</label>
                                    <select class="form-select" id="gender" required>
                                        <option value="">Select Gender</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email">
                        </div>
                        <div class="mb-3">
                            <label for="phoneNumber" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="phoneNumber">
                        </div>
                        <div class="mb-3">
                            <label for="address" class="form-label">Address</label>
                            <textarea class="form-control" id="address" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="addPatient()">Add Patient</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Monitoring Record Modal -->
    <div class="modal fade" id="addMonitoringModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Monitoring Record</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addMonitoringForm">
                        <div class="mb-3">
                            <label for="monitoringPatientId" class="form-label">Patient *</label>
                            <select class="form-select" id="monitoringPatientId" required>
                                <option value="">Select Patient</option>
                            </select>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="temperature" class="form-label">Temperature (°C)</label>
                                    <input type="number" step="0.1" class="form-control" id="temperature">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="heartRate" class="form-label">Heart Rate (bpm)</label>
                                    <input type="number" class="form-control" id="heartRate">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="bloodPressureSystolic" class="form-label">Systolic BP</label>
                                    <input type="number" class="form-control" id="bloodPressureSystolic">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="bloodPressureDiastolic" class="form-label">Diastolic BP</label>
                                    <input type="number" class="form-control" id="bloodPressureDiastolic">
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="weight" class="form-label">Weight (kg)</label>
                            <input type="number" step="0.1" class="form-control" id="weight">
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="location" class="form-label">Location</label>
                                    <select class="form-select" id="location">
                                        <option value="Hospital">Hospital</option>
                                        <option value="Home">Home</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="recordedBy" class="form-label">Recorded By</label>
                                    <select class="form-select" id="recordedBy">
                                        <option value="Patient">Patient</option>
                                        <option value="Nurse">Nurse</option>
                                        <option value="Doctor">Doctor</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="symptoms" class="form-label">Symptoms</label>
                            <textarea class="form-control" id="symptoms" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="notes" class="form-label">Notes</label>
                            <textarea class="form-control" id="notes" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="addMonitoringRecord()">Add Record</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Rehabilitation Plan Modal -->
    <div class="modal fade" id="addRehabilitationModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Rehabilitation Plan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addRehabilitationForm">
                        <div class="mb-3">
                            <label for="rehabPatientId" class="form-label">Patient ID *</label>
                            <input type="number" class="form-control" id="rehabPatientId" required>
                            <div id="patientInfo" class="form-text text-muted"></div>
                        </div>

                        <div class="mb-3">
                            <label for="planName" class="form-label">Plan Name *</label>
                            <input type="text" class="form-control" id="planName" required>
                        </div>

                        <div class="mb-3">
                            <label for="startDate" class="form-label">Start Date *</label>
                            <input type="date" class="form-control" id="startDate" required>
                        </div>

                        <div class="mb-3">
                            <label for="endDate" class="form-label">End Date *</label>
                            <input type="date" class="form-control" id="endDate">
                        </div>

                        <div class="mb-3">
                            <label for="progress" class="form-label">Progress (%) *</label>
                            <input type="number" min="0" max="100" step="1" class="form-control" id="progress">
                        </div>

                        <div class="mb-3">
                            <label for="rehabstatus" class="form-label">Status *</label>
                            <select class="form-select" id="rehabstatus" required>
                                <option value="">Select status</option>
                                <option value="NotStarted">Not Started</option>
                                <option value="InProgress">In Progress</option>
                                <option value="Completed">Completed</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="notes" class="form-label">Notes *</label>
                            <input type="text" class="form-control" id="notes" required>
                        </div>
                        <div class="mb-3">
                            <label for="therapistName" class="form-label">Therapist Name *</label>
                            <input type="text" class="form-control" id="therapistName" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="addRehabilitationPlan()">Add Plan</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Loading Spinner -->
    <div id="loading-spinner" class="position-fixed top-50 start-50 translate-middle" style="display: none;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3" id="toast-container"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../js/app.js"></script>
</body>

</html>